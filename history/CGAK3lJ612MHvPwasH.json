[{
  "history_id" : "440mw7q2kzf",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218462,
  "history_end_time" : 1666683406418,
  "history_notes" : null,
  "history_process" : "6up921",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "i4n6r70vote",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218471,
  "history_end_time" : 1666683406475,
  "history_notes" : null,
  "history_process" : "xpdg66",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "0hmerq7fhmq",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218472,
  "history_end_time" : 1666683406476,
  "history_notes" : null,
  "history_process" : "xlayd5",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "s8sxbprm345",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218473,
  "history_end_time" : 1666683406476,
  "history_notes" : null,
  "history_process" : "argv3i",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "0fig6nnkiu3",
  "history_input" : "# use the trained model to predict on the testing data and save the results to prediction_rf.csv\n\nimport pandas as pd\nimport pickle\nfrom pathlib import Path\nfrom time import sleep\nimport glob, os\nfrom sklearn.metrics import r2_score, mean_squared_error\nfrom cmaq_ai_utils import *\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_files/\")\n\n# importing data\n# final=pd.read_csv(f\"{cmaq_folder}/testing_input_hourly/testing.csv\")\ntesting_path = f'{cmaq_folder}/testing_input_hourly'\nall_hourly_files = glob.glob(os.path.join(testing_path, \"test_data_*.csv\"))\ndf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\n# load the model from disk\n# filename = f'{cmaq_folder}/models/rf_pycaret.sav'\n\nfilename = f'{cmaq_folder}/models/rf_pycaret_o3_one_year.sav'\nloaded_model = pickle.load(open(filename, 'rb'))\n\nfor testing_df in df_from_each_hourly_file:\n  print(testing_df['YYYYMMDDHH'].values[0])\n  file_dateTime = testing_df['YYYYMMDDHH'].values[0]\n  #X = testing_df.drop(['YYYYMMDDHH','Latitude','Longitude'],axis=1)\n  testing_df['time_of_day'] = (testing_df['hours'] % 24 + 4) // 4\n\n  # Make coords even more coarse by rounding to closest multiple of 5 \n  # (e.g., 40, 45, 85, 55)\n  #testing_df['Latitude_ExtraCoarse'] = 0.1 * round(testing_df['Latitude']/0.1)\n  #testing_df['Longitude_ExtraCoarse'] = 0.1 * round(testing_df['Longitude']/0.1)\n  X = testing_df.drop(['YYYYMMDDHH','Latitude','Longitude', 'CO(moles/s)'],axis=1)\n  \n  print(X.columns)\n\n# # making prediction\n  pred = loaded_model.predict(X)\n\n# adding prediction values to test dataset\n  #testing_df['prediction'] = testing_df['CMAQ12KM_O3(ppb)'].tolist()\n  testing_df['prediction'] = pred\n\n  testing_df = testing_df[['Latitude', 'Longitude','YYYYMMDDHH','prediction']]\n# saving the dataset into local drive\n  print(f'Saving: {cmaq_folder}/prediction_files/prediction_rf_{file_dateTime}.csv')\n  testing_df.to_csv(f'{cmaq_folder}/prediction_files/prediction_rf_{file_dateTime}.csv',index=False)",
  "history_output" : "2022102222\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102222.csv\n2022102113\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102113.csv\n2022102114\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102114.csv\n2022102121\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102121.csv\n2022102302\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102302.csv\n2022102210\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102210.csv\n2022102217\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102217.csv\n2022102305\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102305.csv\n2022102219\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102219.csv\n2022102208\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102208.csv\n2022102206\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102206.csv\n2022102201\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102201.csv\n2022102218\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102218.csv\n2022102216\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102216.csv\n2022102304\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102304.csv\n2022102120\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102120.csv\n2022102303\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102303.csv\n2022102211\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102211.csv\n2022102115\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102115.csv\n2022102223\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102223.csv\n2022102112\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102112.csv\n2022102200\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102200.csv\n2022102207\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102207.csv\n2022102209\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102209.csv\n2022102204\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102204.csv\n2022102311\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102311.csv\n2022102203\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102203.csv\n2022102309\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102309.csv\n2022102123\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102123.csv\n2022102300\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102300.csv\n2022102212\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102212.csv\n2022102215\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102215.csv\n2022102307\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102307.csv\n2022102220\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102220.csv\n2022102116\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102116.csv\n2022102118\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102118.csv\n2022102310\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102310.csv\n2022102202\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102202.csv\n2022102205\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102205.csv\n2022102119\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102119.csv\n2022102117\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102117.csv\n2022102221\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102221.csv\n2022102214\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102214.csv\n2022102306\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102306.csv\n2022102122\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102122.csv\n2022102301\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102301.csv\n2022102213\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102213.csv\n2022102308\nIndex(['CMAQ12KM_O3(ppb)', 'CMAQ12KM_NO2(ppb)', 'CMAQ12KM_CO(ppm)',\n       'CMAQ_OC(ug/m3)', 'PRSFC(Pa)', 'PBL(m)', 'TEMP2(K)', 'WSPD10(m/s)',\n       'WDIR10(degree)', 'RGRND(W/m2)', 'CFRAC', 'month', 'day', 'hours',\n       'time_of_day'],\n      dtype='object')\nSaving: /groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022102308.csv\n",
  "history_begin_time" : 1666682654806,
  "history_end_time" : 1666683406477,
  "history_notes" : null,
  "history_process" : "l8vlic",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "xyxqcoypsjd",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218511,
  "history_end_time" : 1666683406481,
  "history_notes" : null,
  "history_process" : "wny2dz",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "e4g0qkdc2yy",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1666683406481,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "8rgxzlnihcx",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218516,
  "history_end_time" : 1666683406498,
  "history_notes" : null,
  "history_process" : "9xdvh6",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "tisztdk8s0b",
  "history_input" : "# get hourly CMAQ data into csv for prediction\n\nfrom cmaq_ai_utils import *\n\n\n#edate = datetime.today()\n#sdate = edate - timedelta(days=1)\ntoday = datetime.today()\nedate = today\nsdate = today - timedelta(days=4)\n\n#sdate = date(2022, 8, 6)   # start date\n#edate = date(2022, 8, 8)   # end date\ndays = get_days_list_for_prediction(sdate, edate)\n\nreal_hour_list = [12,13,14,15,16,17,18,19,20,21,22,23,0,1,2,3,4,5,6,7,8,9,10,11]\ntime_step_in_netcdf_list = range(0,24)\n\ntest_folder = f\"{cmaq_folder}/testing_input_hourly/\"\ncreate_and_clean_folder(test_folder)\n\nfor x in range(len(days)-1):\n  current_day = days[x]\n  next_day = days[x+1]\n  print(\"Getting data for: \"+current_day)\n  \n  # read cmaq results\n  cmaq_file = \"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+current_day+\"_extracted.nc\"\n  if not os.path.exists(cmaq_file):\n    print(f\"CMAQ file {cmaq_file} doesn't exist\")\n    continue\n  \n  target_cdf_file = f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+current_day+'_ML_extracted.nc'\n    \n  if os.path.exists(target_cdf_file):\n    print(f\"{target_cdf_file} already exists\")\n    continue\n  \n  df_cmaq = xr.open_dataset(cmaq_file)\n  \n  # read mcip results \n  mcip_file = \"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/mcip/12km/METCRO2D_\"+current_day+\".nc\"\n  df_mcip = xr.open_dataset(mcip_file)\n  \n  # read emissions results \n  df_emis = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/emis2021/12km/all/emis_mole_all_\"+current_day+\"_AQF5X_cmaq_cb6ae7_2017gb_17j.ncf\")\n  \n  for k in time_step_in_netcdf_list:\n    real_hour_value = real_hour_list[k]\n    \n    if real_hour_value<12:\n      day = next_day\n    else:\n      day = current_day\n    \n    df_hourly = pd.DataFrame()\n    \n    print(\"df_cmaq.variables['O3'] shape: \", df_cmaq.variables['O3'].shape)\n    print(\"df_cmaq.variables['O3'][:] shape: \", df_cmaq.variables['O3'][:].shape)\n    print(\"df_cmaq.variables['O3'][:].values[k, 0].shape\", df_cmaq.variables['O3'][:].values[k, 0].shape)\n    # CMAQ data\n    # O3 variable\n    o3=df_cmaq.variables['O3'][:].values[k, 0]\n    cmaq_O3=list(np.ravel(o3).transpose())\n    print(\"o3 shape: \", o3.shape)\n    print(\"cmaq_O3 shape: \", np.ravel(o3).transpose().shape)\n    \n    # NO2\n    no2=df_cmaq.variables['NO2'][:].values[k, 0]\n    cmaq_NO2=list(np.ravel(no2).transpose())\n    \n    # CO\n    co=df_cmaq.variables['CO'][:].values[k, 0]\n    cmaq_CO=list(np.ravel(co).transpose())\n    \n    # PM25_CO\n    pm25=df_cmaq.variables['PM25_OC'][:].values[k, 0]\n    cmaq_PM25_CO=list(np.ravel(pm25).transpose())\n    \n    # EMIS data\n    co_emis=df_emis.variables['CO'][:].values[k, 0]\n    CO_emi=list(np.ravel(co_emis).transpose())    \n    \n    # MCIP data\n    # CO variable\n    prsfc=df_mcip.variables['PRSFC'][:].values[k, 0]\n    PRSFC=list(np.ravel(prsfc).transpose())\n    \n    # NO2\n    pbl=df_mcip.variables['PBL'][:].values[k, 0]\n    PBL=list(np.ravel(pbl).transpose())\n    \n    # TEMP2\n    temp2=df_mcip.variables['TEMP2'][:].values[k, 0]\n    TEMP2=list(np.ravel(temp2).transpose())\n    \n    # WSPD10\n    wspd10=df_mcip.variables['WSPD10'][:].values[k, 0]\n    WSPD10=list(np.ravel(wspd10).transpose())\n    \n    # WDIR10\n    wdir10=df_mcip.variables['WDIR10'][:].values[k, 0]\n    WDIR10=list(np.ravel(wdir10).transpose())\n    \n    # RGRND\n    rgrnd=df_mcip.variables['RGRND'][:].values[k, 0]\n    RGRND=list(np.ravel(rgrnd).transpose())\n    \n    # CFRAC\n    cfrac=df_mcip.variables['CFRAC'][:].values[k, 0]\n    CFRAC=list(np.ravel(cfrac).transpose())\n    \n    ## LAT/LON data\n    df_coords = xr.open_dataset('/home/yli74/scripts/plots/2020fire/GRIDCRO2D')\n    \n    lat = df_coords.variables['LAT'][:].values[0,0]\n    print(\"lat shape\", lat.shape)\n    lat_flt=np.ravel(lat)\n    LAT=lat_flt #np.tile(lat_flt,1)\n    \n    lon = df_coords.variables['LON'][:].values[0,0]\n    lon_flt=np.ravel(lon)\n    LON=lon_flt #np.tile(lon_flt,1)\n    \n    df_hourly['Latitude'] = LAT\n    df_hourly['Longitude'] = LON\n    df_hourly['YYYYMMDDHH'] = day+turn_2_digits(real_hour_value)\n    df_hourly['CMAQ12KM_O3(ppb)'] = cmaq_O3\n    df_hourly['CMAQ12KM_NO2(ppb)'] = cmaq_NO2\n    df_hourly['CMAQ12KM_CO(ppm)'] = cmaq_CO\n    df_hourly['CMAQ_OC(ug/m3)'] = cmaq_PM25_CO\n    df_hourly['CO(moles/s)'] = CO_emi\n    df_hourly['PRSFC(Pa)'] = PRSFC\n    df_hourly['PBL(m)'] = PBL\n    df_hourly['TEMP2(K)'] = TEMP2\n    df_hourly['WSPD10(m/s)'] = WSPD10\n    df_hourly['WDIR10(degree)'] = WDIR10\n    df_hourly['RGRND(W/m2)'] = RGRND\n    df_hourly['CFRAC'] = CFRAC\n    df_hourly['month'] = df_hourly['YYYYMMDDHH'].str[4:6]\n    df_hourly['day'] = df_hourly['YYYYMMDDHH'].str[6:8]\n    df_hourly['hours'] = df_hourly['YYYYMMDDHH'].str[8:10]\n    print(f'Saving file: test_data_{day}_{turn_2_digits(real_hour_value)}.csv')\n    df_hourly.to_csv(f'{test_folder}/test_data_{day}_{turn_2_digits(real_hour_value)}.csv',index=False)\n\nprint('Done with preparing testing data!')",
  "history_output" : "Getting data for: 20221021\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_12.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_13.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_14.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_15.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_16.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_17.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_18.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_19.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_20.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_21.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_22.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221021_23.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_00.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_01.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_02.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_03.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_04.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_05.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_06.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_07.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_08.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_09.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_10.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_11.csv\nGetting data for: 20221022\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_12.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_13.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_14.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_15.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_16.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_17.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_18.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_19.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_20.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_21.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_22.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221022_23.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_00.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_01.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_02.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_03.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_04.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_05.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_06.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_07.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_08.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_09.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_10.csv\ndf_cmaq.variables['O3'] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:] shape:  (24, 35, 265, 442)\ndf_cmaq.variables['O3'][:].values[k, 0].shape (265, 442)\no3 shape:  (265, 442)\ncmaq_O3 shape:  (117130,)\nlat shape (265, 442)\nSaving file: test_data_20221023_11.csv\nGetting data for: 20221023\nCMAQ file /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20221023_extracted.nc doesn't exist\nGetting data for: 20221024\nCMAQ file /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20221024_extracted.nc doesn't exist\nDone with preparing testing data!\n",
  "history_begin_time" : 1666682219034,
  "history_end_time" : 1666683406498,
  "history_notes" : null,
  "history_process" : "ex3vh9",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "4nedfw94u9l",
  "history_input" : "# merge all hourly testing data into daily files\n\nimport pandas as pd\nimport glob\nimport os\nfrom pathlib import Path\nfrom cmaq_ai_utils import *\n\ntesting_path = f'{cmaq_folder}/testing_input_hourly'\nall_hourly_files = glob.glob(os.path.join(testing_path, \"test_data_*.csv\"))   \n# advisable to use os.path.join as this makes concatenation OS independent\n\ndf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\ncmaq = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n# dropping unnecessary variables\ncmaq['YYYYMMDDHH'] = cmaq['YYYYMMDDHH'].map(str)\ncmaq['month'] = cmaq['YYYYMMDDHH'].str[4:6]\ncmaq['day'] = cmaq['YYYYMMDDHH'].str[6:8]\ncmaq['hours'] = cmaq['YYYYMMDDHH'].str[8:10]\n\nremove_file(f\"{testing_path}/testing.csv\")\ncmaq.to_csv(f\"{testing_path}/testing.csv\",index=False)\n\nprint('Done with generating testing.csv!')",
  "history_output" : "remove old files/groups/ESS/zsun/cmaq//testing_input_hourly/testing.csv\nDone with generating testing.csv!\n",
  "history_begin_time" : 1666682532536,
  "history_end_time" : 1666683406498,
  "history_notes" : null,
  "history_process" : "b8uv5z",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "0owt5jmdzyz",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1666683406499,
  "history_notes" : null,
  "history_process" : "iicy7w",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "d5za5xbbxuk",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1666683406500,
  "history_notes" : null,
  "history_process" : "fsk7f2",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "6bifsnycfjk",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1666683406500,
  "history_notes" : null,
  "history_process" : "is1w3m",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "ia4y9xlmlzv",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218533,
  "history_end_time" : 1666683406503,
  "history_notes" : null,
  "history_process" : "h76ld0",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "51nbudaudx4",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218535,
  "history_end_time" : 1666683406506,
  "history_notes" : null,
  "history_process" : "s6hbic",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "9gptueyz4d8",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218536,
  "history_end_time" : 1666683406507,
  "history_notes" : null,
  "history_process" : "pvzabv",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
},{
  "history_id" : "8u9fxfu9928",
  "history_input" : "No code saved",
  "history_output" : "Skipped",
  "history_begin_time" : 1666682218538,
  "history_end_time" : 1666683406508,
  "history_notes" : null,
  "history_process" : "8i9ptn",
  "host_id" : "aqt8fv",
  "indicator" : "Stopped"
}]
