[{
  "history_id" : "uTWEBNOTOVp3",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 5)   # start date\nedate = date(2022, 8, 6)   # end date\ndays = get_days_list(sdate, edate)\n\nprediction_path = f\"{cmaq_folder}/prediction_files/\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\nall_hourly_files = sorted(glob.glob(os.path.join(prediction_path, \"*.csv\")))\nprint(\"overall hourly files: \", all_hourly_files)\n\nfor i in range(1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i+1]+\"_extracted.nc\")\n  \n  print(\"single day hourly files: \", all_hourly_files[i*24:(i+1)*24])\n  df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files[i*24:(i+1)*24])\n  \n  df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n  reshaped_prediction = df_csv['prediction'].to_numpy().reshape(24, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')",
  "history_output" : "overall hourly files:  ['/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080512.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080513.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080514.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080515.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080516.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080517.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080518.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080519.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080520.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080521.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080522.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080523.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080600.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080601.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080602.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080603.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080604.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080605.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080606.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080607.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080608.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080609.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080610.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080611.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080612.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080613.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080614.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080615.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080616.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080617.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080618.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080619.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080620.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080621.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080622.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080623.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080700.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080701.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080702.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080703.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080704.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080705.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080706.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080707.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080708.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080709.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080710.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080711.csv']\n20220805\nsingle day hourly files:  ['/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080512.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080513.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080514.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080515.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080516.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080517.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080518.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080519.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080520.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080521.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080522.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080523.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080600.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080601.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080602.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080603.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080604.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080605.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080606.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080607.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080608.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080609.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080610.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080611.csv']\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220805_ML_extracted.nc\n",
  "history_begin_time" : 1660760987800,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "ke1NdbpgTCQc",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 5)   # start date\nedate = date(2022, 8, 6)   # end date\ndays = get_days_list(sdate, edate)\n\nprediction_path = f\"{cmaq_folder}/prediction_files/\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n\n\nfor i in range(1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i+1]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')",
  "history_output" : "20220805\n['/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080512.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080513.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080514.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080515.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080516.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080517.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080518.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080519.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080520.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080521.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080522.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080523.csv']\n['/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080600.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080601.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080602.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080603.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080604.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080605.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080606.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080607.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080608.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080609.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080610.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080611.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080612.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080613.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080614.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080615.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080616.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080617.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080618.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080619.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080620.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080621.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080622.csv', '/groups/ESS/zsun/cmaq//prediction_files/prediction_rf_2022080623.csv']\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220805_ML_extracted.nc\n",
  "history_begin_time" : 1660760602415,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "HaRbUsc8TTIm",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 5)   # start date\nedate = date(2022, 8, 6)   # end date\ndays = get_days_list(sdate, edate)\n\nprediction_path = f\"{cmaq_folder}/prediction_files/\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n\n\nfor i in range(1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i+1]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')",
  "history_output" : "20220805\n[]\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 32, in <module>\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/util/_decorators.py\", line 311, in wrapper\n    return func(*args, **kwargs)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 346, in concat\n    op = _Concatenator(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 403, in __init__\n    raise ValueError(\"No objects to concatenate\")\nValueError: No objects to concatenate\n",
  "history_begin_time" : 1660759926655,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "JH4Gfd6dcEah",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 5)   # start date\nedate = date(2022, 8, 6)   # end date\ndays = get_days_list(sdate, edate)\n\nprediction_path = f\"{cmaq_folder}/testing_input_hourly/\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n\n\nfor i in range(1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i+1]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')",
  "history_output" : "20220805\n[]\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 32, in <module>\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/util/_decorators.py\", line 311, in wrapper\n    return func(*args, **kwargs)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 346, in concat\n    op = _Concatenator(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 403, in __init__\n    raise ValueError(\"No objects to concatenate\")\nValueError: No objects to concatenate\n",
  "history_begin_time" : 1660759782566,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "K1Q4YcXuzlqS",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 5)   # start date\nedate = date(2022, 8, 6)   # end date\ndays = get_days_list(sdate, edate)\n\nprediction_path = f\"{cmaq_folder}/prediction_files\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n\n\nfor i in range(1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i+1]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n\n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')",
  "history_output" : "20220805\n[]\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 32, in <module>\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/util/_decorators.py\", line 311, in wrapper\n    return func(*args, **kwargs)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 346, in concat\n    op = _Concatenator(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 403, in __init__\n    raise ValueError(\"No objects to concatenate\")\nValueError: No objects to concatenate\n",
  "history_begin_time" : 1660759669611,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "oMNIWocyS2kB",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\nprediction_path = f\"{cmaq_folder}/prediction_files\"\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  \n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\n[]\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 39, in <module>\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/util/_decorators.py\", line 311, in wrapper\n    return func(*args, **kwargs)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 346, in concat\n    op = _Concatenator(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/pandas/core/reshape/concat.py\", line 403, in __init__\n    raise ValueError(\"No objects to concatenate\")\nValueError: No objects to concatenate\n",
  "history_begin_time" : 1660759562833,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "ZngpIbxxcsoO",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[i]+\"_extracted.nc\")\n  \n  for dayFile in [f\"*{days[i]}*.csv\", f\"*{days[i+1]}*.csv\"]:\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\n    print(all_hourly_files)\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    df_csv = pd.concat(df_from_each_hourly_file, ignore_index=True)\n  \n  reshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n  print(reshaped_prediction.shape)\n  \n  # Remove \"LAY\" Dimension in O3 variable already in nc file.\n  reduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n#   create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 35, in <module>\n    all_hourly_files = sorted(glob.glob(os.path.join(prediction_path, dayFile)))\nNameError: name 'prediction_path' is not defined\n",
  "history_begin_time" : 1660759459591,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "h9diWxXMARPD",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  single_day_result = reshaped_prediction[i*24:(i+1)*24, :, :]\n  print(single_day_result.shape)\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = single_day_result\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], single_day_result)\n\n  \n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n20220802\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220802_20220803_ML_extracted.nc\n",
  "history_begin_time" : 1660750902520,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "K4vbgcvzA62F",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  single_day_result = reshaped_prediction[i*24:(i+1)*24, :, :]\n  print(single_day_result.shape)\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = single_day_result\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], single_day_result)\n\n  \n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n20220802\n(24, 265, 442)\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220802_20220803_ML_extracted.nc\n",
  "history_begin_time" : 1660709703163,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "xNCUn13mkljo",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  single_day_result = reshaped_prediction[i*24:(i+1)*24, :, :]\n  print(single_day_result.shape)\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = single_day_result\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n  \n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\n(24, 265, 442)\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 40, in <module>\n    df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 1564, in __setitem__\n    self.update({key: value})\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 4253, in update\n    merge_result = dataset_update_method(self, other)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 988, in dataset_update_method\n    return merge_core(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 640, in merge_core\n    dims = calculate_dimensions(variables)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 204, in calculate_dimensions\n    raise ValueError(\nValueError: conflicting sizes for dimension 'TSTEP': length 48 on 'O3' and length 24 on {'TSTEP': 'TFLAG', 'VAR': 'TFLAG', 'DATE-TIME': 'TFLAG', 'LAY': 'CO', 'ROW': 'CO', 'COL': 'CO'}\n",
  "history_begin_time" : 1660709667836,
  "history_end_time" : 1660709689148,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "rhlzmSEFkM3e",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction[i*24:(i+1)*24, :, :]\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n  \n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 37, in <module>\n    df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 1564, in __setitem__\n    self.update({key: value})\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 4253, in update\n    merge_result = dataset_update_method(self, other)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 988, in dataset_update_method\n    return merge_core(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 640, in merge_core\n    dims = calculate_dimensions(variables)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 204, in calculate_dimensions\n    raise ValueError(\nValueError: conflicting sizes for dimension 'TSTEP': length 48 on 'O3' and length 24 on {'TSTEP': 'TFLAG', 'VAR': 'TFLAG', 'DATE-TIME': 'TFLAG', 'LAY': 'CO', 'ROW': 'CO', 'COL': 'CO'}\n",
  "history_begin_time" : 1660709589440,
  "history_end_time" : 1660709689625,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "Ca1Iw2iTBREv",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\nprint(reshaped_prediction.shape)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction[i*24:(i+1)*24]\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n  create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "(48, 265, 442)\n20220801\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 35, in <module>\n    df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 1564, in __setitem__\n    self.update({key: value})\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 4253, in update\n    merge_result = dataset_update_method(self, other)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 988, in dataset_update_method\n    return merge_core(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 640, in merge_core\n    dims = calculate_dimensions(variables)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 204, in calculate_dimensions\n    raise ValueError(\nValueError: conflicting sizes for dimension 'TSTEP': length 48 on 'O3' and length 24 on {'TSTEP': 'TFLAG', 'VAR': 'TFLAG', 'DATE-TIME': 'TFLAG', 'LAY': 'CO', 'ROW': 'CO', 'COL': 'CO'}\n",
  "history_begin_time" : 1660709514275,
  "history_end_time" : 1660709690125,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "cHd86IRQba8s",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\nfor i in range(len(days)-1):\n  print(days[i])\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction[i*24:(i+1)*24]\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n  create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "20220801\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 34, in <module>\n    df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 1564, in __setitem__\n    self.update({key: value})\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 4253, in update\n    merge_result = dataset_update_method(self, other)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 988, in dataset_update_method\n    return merge_core(\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/merge.py\", line 640, in merge_core\n    dims = calculate_dimensions(variables)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataset.py\", line 204, in calculate_dimensions\n    raise ValueError(\nValueError: conflicting sizes for dimension 'TSTEP': length 48 on 'O3' and length 24 on {'TSTEP': 'TFLAG', 'VAR': 'TFLAG', 'DATE-TIME': 'TFLAG', 'LAY': 'CO', 'ROW': 'CO', 'COL': 'CO'}\n",
  "history_begin_time" : 1660709424959,
  "history_end_time" : 1660709690625,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "QQZPWZ3mkTHf",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\nfor i in len(days)-1:\n  print(days[i])\n  \n  # Swap values from original nc file with new prediction data\n  reduced_dim.values = reshaped_prediction[i*24:(i+1)*24]\n\n  # Apply changes to data variable in nc file\n  df_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n  create_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\n  df_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n  print(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[i]+'_'+days[i+1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 27, in <module>\n    for i in len(days)-1:\nTypeError: 'int' object is not iterable\n",
  "history_begin_time" : 1660709325750,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "FqLTboQyGgSV",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n\nfor i in days:\n  print(i)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "20220801\n20220802\n20220803\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 30, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660709182590,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "umBRV8XMTutG",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\n# df_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n# print(df_csv['YYYYMMDDHH'].unique())\n# df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\n# df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n# print(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\n#reshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 27, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660709035112,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "ZY9llWce5kwT",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022080117' '2022080221' '2022080119' '2022080308' '2022080214'\n '2022080306' '2022080122' '2022080301' '2022080213' '2022080310'\n '2022080202' '2022080205' '2022080123' '2022080300' '2022080212'\n '2022080215' '2022080307' '2022080309' '2022080118' '2022080220'\n '2022080116' '2022080204' '2022080311' '2022080203' '2022080209'\n '2022080200' '2022080207' '2022080216' '2022080304' '2022080120'\n '2022080303' '2022080211' '2022080218' '2022080115' '2022080223'\n '2022080112' '2022080206' '2022080201' '2022080208' '2022080222'\n '2022080113' '2022080114' '2022080219' '2022080121' '2022080302'\n '2022080210' '2022080217' '2022080305']\n['2022080117' '2022080119' '2022080122' '2022080202' '2022080205'\n '2022080123' '2022080118' '2022080116' '2022080204' '2022080203'\n '2022080209' '2022080200' '2022080207' '2022080120' '2022080211'\n '2022080115' '2022080112' '2022080206' '2022080201' '2022080208'\n '2022080113' '2022080114' '2022080121' '2022080210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1660523051465,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "GI4T5PkVgHTV",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022080117' '2022080221' '2022080119' '2022080308' '2022080214'\n '2022080306' '2022080122' '2022080301' '2022080213' '2022080310'\n '2022080202' '2022080205' '2022080123' '2022080300' '2022080212'\n '2022080215' '2022080307' '2022080309' '2022080118' '2022080220'\n '2022080116' '2022080204' '2022080311' '2022080203' '2022080209'\n '2022080200' '2022080207' '2022080216' '2022080304' '2022080120'\n '2022080303' '2022080211' '2022080218' '2022080115' '2022080223'\n '2022080112' '2022080206' '2022080201' '2022080208' '2022080222'\n '2022080113' '2022080114' '2022080219' '2022080121' '2022080302'\n '2022080210' '2022080217' '2022080305']\n['2022080117' '2022080119' '2022080122' '2022080202' '2022080205'\n '2022080123' '2022080118' '2022080116' '2022080204' '2022080203'\n '2022080209' '2022080200' '2022080207' '2022080120' '2022080211'\n '2022080115' '2022080112' '2022080206' '2022080201' '2022080208'\n '2022080113' '2022080114' '2022080121' '2022080210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1660522575165,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "DMIsZuGW5o6r",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 8, 1)   # start date\nedate = date(2022, 8, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022080117' '2022080221' '2022080119' '2022080308' '2022080214'\n '2022080306' '2022080122' '2022080301' '2022080213' '2022080310'\n '2022080202' '2022080205' '2022080123' '2022080300' '2022080212'\n '2022080215' '2022080307' '2022080309' '2022080118' '2022080220'\n '2022080116' '2022080204' '2022080311' '2022080203' '2022080209'\n '2022080200' '2022080207' '2022080216' '2022080304' '2022080120'\n '2022080303' '2022080211' '2022080218' '2022080115' '2022080223'\n '2022080112' '2022080206' '2022080201' '2022080208' '2022080222'\n '2022080113' '2022080114' '2022080219' '2022080121' '2022080302'\n '2022080210' '2022080217' '2022080305']\n['2022080117' '2022080119' '2022080122' '2022080202' '2022080205'\n '2022080123' '2022080118' '2022080116' '2022080204' '2022080203'\n '2022080209' '2022080200' '2022080207' '2022080120' '2022080211'\n '2022080115' '2022080112' '2022080206' '2022080201' '2022080208'\n '2022080113' '2022080114' '2022080121' '2022080210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1660521342452,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "SbaJvHI8DDlW",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022070117' '2022070221' '2022070119' '2022070308' '2022070214'\n '2022070306' '2022070122' '2022070301' '2022070213' '2022070310'\n '2022070202' '2022070205' '2022070123' '2022070300' '2022070212'\n '2022070215' '2022070307' '2022070309' '2022070118' '2022070220'\n '2022070116' '2022070204' '2022070311' '2022070203' '2022070209'\n '2022070200' '2022070207' '2022070216' '2022070304' '2022070120'\n '2022070303' '2022070211' '2022070218' '2022070115' '2022070223'\n '2022070112' '2022070206' '2022070201' '2022070208' '2022070222'\n '2022070113' '2022070114' '2022070219' '2022070121' '2022070302'\n '2022070210' '2022070217' '2022070305']\n['2022070117' '2022070119' '2022070122' '2022070202' '2022070205'\n '2022070123' '2022070118' '2022070116' '2022070204' '2022070203'\n '2022070209' '2022070200' '2022070207' '2022070120' '2022070211'\n '2022070115' '2022070112' '2022070206' '2022070201' '2022070208'\n '2022070113' '2022070114' '2022070121' '2022070210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220701_20220702_ML_extracted.nc\n",
  "history_begin_time" : 1660520313558,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "3uhZlo3qxMwH",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)] #this line seems unnecessary\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022070117' '2022070221' '2022070119' '2022070308' '2022070214'\n '2022070306' '2022070122' '2022070301' '2022070213' '2022070310'\n '2022070202' '2022070205' '2022070123' '2022070300' '2022070212'\n '2022070215' '2022070307' '2022070309' '2022070118' '2022070220'\n '2022070116' '2022070204' '2022070311' '2022070203' '2022070209'\n '2022070200' '2022070207' '2022070216' '2022070304' '2022070120'\n '2022070303' '2022070211' '2022070218' '2022070115' '2022070223'\n '2022070112' '2022070206' '2022070201' '2022070208' '2022070222'\n '2022070113' '2022070114' '2022070219' '2022070121' '2022070302'\n '2022070210' '2022070217' '2022070305']\n['2022070117' '2022070119' '2022070122' '2022070202' '2022070205'\n '2022070123' '2022070118' '2022070116' '2022070204' '2022070203'\n '2022070209' '2022070200' '2022070207' '2022070120' '2022070211'\n '2022070115' '2022070112' '2022070206' '2022070201' '2022070208'\n '2022070113' '2022070114' '2022070121' '2022070210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220701_20220702_ML_extracted.nc\n",
  "history_begin_time" : 1660519310893,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "RWJUvJoFJqY3",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\nprint(df_csv['YYYYMMDDHH'].unique())\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022070117' '2022070221' '2022070119' '2022070308' '2022070214'\n '2022070306' '2022070122' '2022070301' '2022070213' '2022070310'\n '2022070202' '2022070205' '2022070123' '2022070300' '2022070212'\n '2022070215' '2022070307' '2022070309' '2022070118' '2022070220'\n '2022070116' '2022070204' '2022070311' '2022070203' '2022070209'\n '2022070200' '2022070207' '2022070216' '2022070304' '2022070120'\n '2022070303' '2022070211' '2022070218' '2022070115' '2022070223'\n '2022070112' '2022070206' '2022070201' '2022070208' '2022070222'\n '2022070113' '2022070114' '2022070219' '2022070121' '2022070302'\n '2022070210' '2022070217' '2022070305']\n['2022070117' '2022070119' '2022070122' '2022070202' '2022070205'\n '2022070123' '2022070118' '2022070116' '2022070204' '2022070203'\n '2022070209' '2022070200' '2022070207' '2022070120' '2022070211'\n '2022070115' '2022070112' '2022070206' '2022070201' '2022070208'\n '2022070113' '2022070114' '2022070121' '2022070210']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220701_20220702_ML_extracted.nc\n",
  "history_begin_time" : 1660363703324,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Running"
},{
  "history_id" : "Nwmbf9XV75xu",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)]\nprint(df_filt['YYYYMMDDHH'].unique())\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022070117' '2022070221' '2022070119' '2022070308' '2022070214'\n '2022070306' '2022070122' '2022070301' '2022070213' '2022070310'\n '2022070202' '2022070205' '2022070123' '2022070300' '2022070212'\n '2022070215' '2022070307' '2022070309' '2022070118' '2022070220'\n '2022070116' '2022070204' '2022070311' '2022070203' '2022070209'\n '2022070200' '2022070207' '2022070216' '2022070304' '2022070120'\n '2022070303' '2022070211' '2022070218' '2022070115' '2022070223'\n '2022070112' '2022070206' '2022070201' '2022070208' '2022070222'\n '2022070113' '2022070114' '2022070219' '2022070121' '2022070302'\n '2022070210' '2022070217' '2022070305']\nSaved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220701_20220702_ML_extracted.nc\n",
  "history_begin_time" : 1660311796514,
  "history_end_time" : 1660363742371,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "QKIqzYj0NhrJ",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)]\nprint(df_filt['YYYYMMDDHH'].unique())\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "['2022070117' '2022070221' '2022070119' '202207027' '202207020'\n '2022070214' '2022070122' '202207029' '2022070213' '2022070310'\n '202207037' '202207030' '202207039' '2022070123' '202207028' '2022070212'\n '2022070215' '202207021' '202207026' '2022070118' '2022070220'\n '2022070116' '202207038' '202207031' '202207036' '2022070311' '202207035'\n '202207032' '2022070216' '2022070120' '2022070211' '202207025'\n '2022070218' '202207022' '2022070115' '2022070223' '2022070112'\n '202207033' '202207034' '2022070222' '2022070113' '2022070114'\n '2022070219' '202207023' '202207024' '2022070121' '2022070210'\n '2022070217']\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 26, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (16, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660280829484,
  "history_end_time" : 1660363741805,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "BTcA1aeIWLW5",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 26, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (16, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660280645807,
  "history_end_time" : 1660280850115,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "MyWBBZxCkI8l",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0]+\"|\"+days[2], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 26, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660280552921,
  "history_end_time" : 1660280849632,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "p982BRXnKjN4",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\n#df_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\n#df_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_csv['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 26, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660280457490,
  "history_end_time" : 1660280849167,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "NmLSE3yIoEH1",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\n# end_date = datetime.today()\n# base = end_date - timedelta(days=2)\nsdate = date(2022, 7, 1)   # start date\nedate = date(2022, 7, 2)   # end date\ndays = get_days_list(sdate, edate)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 26, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (16, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660280237349,
  "history_end_time" : 1660280848702,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "cNZaMToj5ZWR",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\nend_date = datetime.today()\nbase = end_date - timedelta(days=2)\ndays = get_days_list(base, end_date)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\n",
  "history_output" : "Saved updated netCDF file: /groups/ESS/zsun/cmaq//prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220810_20220811_ML_extracted.nc\n",
  "history_begin_time" : 1660277446150,
  "history_end_time" : 1660280847775,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "LicjTtWn7lNY",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\nfrom cmaq_ai_utils import *\n\nend_date = datetime.today()\nbase = end_date - timedelta(days=2)\ndays = get_days_list(base, end_date)\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(f\"{cmaq_folder}/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ncreate_and_clean_folder(f\"{cmaq_folder}/prediction_nc_files\")\ndf_cdf.to_netcdf(f'{cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint(f'Saved updated netCDF file: {cmaq_folder}/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 24, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/zsun/anaconda3/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (16, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1660275554019,
  "history_end_time" : 1660277616865,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "WR447iNe9WK2",
  "history_input" : "# load the prediction_rf.csv into a NetCDF file for visualization\n\nimport xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220803_20220804_ML_extracted.nc\n",
  "history_begin_time" : 1659742463857,
  "history_end_time" : 1659935020975,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "vINBrmZQTqa5",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220801', '20220802']\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\") \n\n## !!!!!!! replace the days[1] with days[0] and check again. This might be a cause\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1659731738702,
  "history_end_time" : 1659935019812,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "ZL9JC18TvMMQ",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220801', '20220802']\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\") \n\n## !!!!!!! replace the days[1] with days[0] and check again. This might be a cause\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1659722958894,
  "history_end_time" : 1659935020258,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "8iaWzkTUvpfP",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220801', '20220802']\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[0]+\"_extracted.nc\") \n\n## !!!!!!! replace the days[1] with days[0] and check again. This might be a cause\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1659722670553,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "eFdQJ9U7Ie1X",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 31, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (20, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1659682835779,
  "history_end_time" : 1659722653979,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "jwHnPRGfoKv8",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220802_20220803_ML_extracted.nc\n",
  "history_begin_time" : 1659668352506,
  "history_end_time" : 1659722652659,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "bfm4lx6e44a",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220801_20220802_ML_extracted.nc\n",
  "history_begin_time" : 1659579116157,
  "history_end_time" : 1659579288089,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Done"
},{
  "history_id" : "ltPFKyPTua3m",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220731', '20220801']\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\n\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\n\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220731_20220801_ML_extracted.nc\n",
  "history_begin_time" : 1659570900337,
  "history_end_time" : 1659935021926,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "EvskBqrZ3zCK",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220731', '20220801']\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\nprint(df_csv['YYYYMMDDHH'].unique())\nprint(df_csv.shape)\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt['YYYYMMDDHH'].unique())\nprint(df_filt.shape)\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "[ 202207310  202207311 2022073110 2022073111 2022073112 2022073113\n 2022073114 2022073115 2022073116 2022073117 2022073118 2022073119\n  202207312 2022073120 2022073121 2022073122 2022073123  202207313\n  202207314  202207315  202207316  202207317  202207318  202207319\n  202208010  202208011 2022080110 2022080111 2022080112 2022080113\n 2022080114 2022080115 2022080116 2022080117 2022080118 2022080119\n  202208012 2022080120 2022080121 2022080122 2022080123  202208013\n  202208014  202208015  202208016  202208017  202208018  202208019]\n(11244480, 4)\n['2022073112' '2022073113' '2022073114' '2022073115' '2022073116'\n '2022073117' '2022073118' '2022073119' '202207312' '2022073120'\n '2022073121' '2022073122' '2022073123' '202207313' '202207314'\n '202207315' '202207316' '202207317' '202207318' '202207319' '202208010'\n '202208011' '2022080110' '2022080111']\n(5622240, 4)\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 33, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1659562679793,
  "history_end_time" : 1659569518317,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "kvBTjHWu0MnT",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220731', '20220801']\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\nprint(df_csv.head())\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[0]+'11') & (df_filt['YYYYMMDDHH'] < days[1]+'12')]\nprint(df_filt.head())\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "    Latitude   Longitude  YYYYMMDDHH  prediction\n0  21.829086 -120.620790   202207310       19.44\n1  21.855751 -120.512500   202207310       19.32\n2  21.882309 -120.404144   202207310       19.37\n3  21.908745 -120.295715   202207310       18.89\n4  21.935051 -120.187225   202207310       19.31\n         Latitude   Longitude  YYYYMMDDHH  prediction\n468520  21.829086 -120.620790  2022073112       19.54\n468521  21.855751 -120.512500  2022073112       19.88\n468522  21.882309 -120.404144  2022073112       18.50\n468523  21.908745 -120.295715  2022073112       19.28\n468524  21.935051 -120.187225  2022073112       18.04\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 30, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (48, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1659562488606,
  "history_end_time" : 1659569517631,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "1sINXhUr1Qb9",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220731', '20220801']\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[0]+'_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 29, in <module>\n    reduced_dim.values = reshaped_prediction\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/common.py\", line 267, in __setattr__\n    object.__setattr__(self, name, value)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/dataarray.py\", line 646, in values\n    self.variable.values = value\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 516, in values\n    self.data = values\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/xarray/core/variable.py\", line 345, in data\n    raise ValueError(\nValueError: replacement data must match the Variable's shape. replacement data has shape (0, 265, 442); Variable has shape (24, 265, 442)\n",
  "history_begin_time" : 1659562347898,
  "history_end_time" : 1659569517135,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "C3ChuglLj7dp",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\ndays = ['20220731', '20220801']\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Traceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 16, in <module>\n    df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\nIndexError: list index out of range\n",
  "history_begin_time" : 1659562252494,
  "history_end_time" : 1659569516322,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "q8Cck7m2iR7b",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day: \"+day)\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\tdf['YYYYMMDDHH'] = df['YYYYMMDDHH'].astype(str)\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220705_extracted.nc\nread all hourly csv's\nreading df for day: 20220705\n10\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070510_Hourly_ML_extracted.nc\nreading df for day: 20220705\n11\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070511_Hourly_ML_extracted.nc\nreading df for day: 20220705\n12\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070512_Hourly_ML_extracted.nc\nreading df for day: 20220705\n13\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070513_Hourly_ML_extracted.nc\nreading df for day: 20220705\n14\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070514_Hourly_ML_extracted.nc\nreading df for day: 20220705\n15\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070515_Hourly_ML_extracted.nc\nreading df for day: 20220705\n16\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070516_Hourly_ML_extracted.nc\nreading df for day: 20220705\n17\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070517_Hourly_ML_extracted.nc\nreading df for day: 20220705\n18\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070518_Hourly_ML_extracted.nc\nreading df for day: 20220705\n19\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070519_Hourly_ML_extracted.nc\nreading df for day: 20220705\n20\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070520_Hourly_ML_extracted.nc\nreading df for day: 20220705\n21\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070521_Hourly_ML_extracted.nc\nreading df for day: 20220705\n22\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070522_Hourly_ML_extracted.nc\nreading df for day: 20220705\n23\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070523_Hourly_ML_extracted.nc\nreading df for day: 20220705\n0\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207050_Hourly_ML_extracted.nc\nreading df for day: 20220705\n1\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207051_Hourly_ML_extracted.nc\nreading df for day: 20220705\n2\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207052_Hourly_ML_extracted.nc\nreading df for day: 20220705\n3\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207053_Hourly_ML_extracted.nc\nreading df for day: 20220705\n4\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207054_Hourly_ML_extracted.nc\nreading df for day: 20220705\n5\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207055_Hourly_ML_extracted.nc\nreading df for day: 20220705\n6\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207056_Hourly_ML_extracted.nc\nreading df for day: 20220705\n7\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207057_Hourly_ML_extracted.nc\nreading df for day: 20220705\n8\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207058_Hourly_ML_extracted.nc\nreading df for day: 20220705\n9\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207059_Hourly_ML_extracted.nc\nOpening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220706_extracted.nc\nread all hourly csv's\nreading df for day: 20220706\n10\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070610_Hourly_ML_extracted.nc\nreading df for day: 20220706\n11\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070611_Hourly_ML_extracted.nc\nreading df for day: 20220706\n12\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070612_Hourly_ML_extracted.nc\nreading df for day: 20220706\n13\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070613_Hourly_ML_extracted.nc\nreading df for day: 20220706\n14\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070614_Hourly_ML_extracted.nc\nreading df for day: 20220706\n15\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070615_Hourly_ML_extracted.nc\nreading df for day: 20220706\n16\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070616_Hourly_ML_extracted.nc\nreading df for day: 20220706\n17\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070617_Hourly_ML_extracted.nc\nreading df for day: 20220706\n18\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070618_Hourly_ML_extracted.nc\nreading df for day: 20220706\n19\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070619_Hourly_ML_extracted.nc\nreading df for day: 20220706\n20\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070620_Hourly_ML_extracted.nc\nreading df for day: 20220706\n21\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070621_Hourly_ML_extracted.nc\nreading df for day: 20220706\n22\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070622_Hourly_ML_extracted.nc\nreading df for day: 20220706\n23\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_2022070623_Hourly_ML_extracted.nc\nreading df for day: 20220706\n0\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207060_Hourly_ML_extracted.nc\nreading df for day: 20220706\n1\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207061_Hourly_ML_extracted.nc\nreading df for day: 20220706\n2\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207062_Hourly_ML_extracted.nc\nreading df for day: 20220706\n3\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207063_Hourly_ML_extracted.nc\nreading df for day: 20220706\n4\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207064_Hourly_ML_extracted.nc\nreading df for day: 20220706\n5\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207065_Hourly_ML_extracted.nc\nreading df for day: 20220706\n6\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207066_Hourly_ML_extracted.nc\nreading df for day: 20220706\n7\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207067_Hourly_ML_extracted.nc\nreading df for day: 20220706\n8\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207068_Hourly_ML_extracted.nc\nreading df for day: 20220706\n9\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_202207069_Hourly_ML_extracted.nc\n",
  "history_begin_time" : 1657246536936,
  "history_end_time" : 1657638459103,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "wPieEkNkWACl",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day: \"+day)\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220705_extracted.nc\nread all hourly csv's\nreading df for day: 20220705\nTraceback (most recent call last):\n  File \"processing_test_netcdf.py\", line 29, in <module>\n    hour = df['YYYYMMDDHH'].str[8:10]\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/generic.py\", line 5583, in __getattr__\n    return object.__getattribute__(self, name)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/accessor.py\", line 182, in __get__\n    accessor_obj = self._accessor(obj)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/strings/accessor.py\", line 177, in __init__\n    self._inferred_dtype = self._validate(data)\n  File \"/home/aalnaim/CMAQAI/lib/python3.8/site-packages/pandas/core/strings/accessor.py\", line 231, in _validate\n    raise AttributeError(\"Can only use .str accessor with string values!\")\nAttributeError: Can only use .str accessor with string values!\n",
  "history_begin_time" : 1657246426998,
  "history_end_time" : 1657246542578,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "n39tvS09NCPH",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\ncsvs_path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n\nfor day in days:\n\tprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n\tdf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n\t\n\tall_hourly_files = sorted(glob.glob(os.path.join(csvs_path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n\tdf_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n\tprint(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day:\"+day+\"\\n\")\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 26\n    print(\"reading df for day:\"+day+\"\n                                    ^\nSyntaxError: EOL while scanning string literal\n",
  "history_begin_time" : 1657246382797,
  "history_end_time" : 1657246542059,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "meUDev6DV7Iq",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n\nfor day in days:\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n    df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n    path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n    all_hourly_files = sorted(glob.glob(os.path.join(path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    print(\"read all hourly csv's\")\n    \n\tfor df in df_from_each_hourly_file:\n\t\tprint(\"reading df for day:\"+day+\"\\n\")\n\n\t\t# Getting hour value in df to match hour in cdf file for replacement of O3 value\n\t\thour = df['YYYYMMDDHH'].str[8:10]\n\t\tprint(hour.values[0])\n        \n\t\t# Matching hours between df and cdf file for proper replacement of values.\n\t\tcdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n\t\t# Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n\t\treshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n\t\t# Remove \"LAY\" Dimension in O3 variable already in nc file.\n\t\treduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n\t\t# Swap values from original nc file with new prediction data\n\t\treduced_dim.values = reshaped_prediction\n\n\t\t# Apply changes to data variable in nc file\n\t\tcdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n\t\tcdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n\t\tprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 24\n    for df in df_from_each_hourly_file:\n                                      ^\nTabError: inconsistent use of tabs and spaces in indentation\n",
  "history_begin_time" : 1657246334695,
  "history_end_time" : 1657246541461,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "YLlq2Glby0Wd",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base + timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n\nfor day in days:\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n      \n    df_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+day+\"_extracted.nc\")\n\n    path = '/groups/ESS/aalnaim/cmaq/output_hourly'\n    all_hourly_files = sorted(glob.glob(os.path.join(path, \"prediction_rf_\"+day+\"*.csv\")), key=lambda name: int(name[-6:-4]))\n    df_from_each_hourly_file = (pd.read_csv(f) for f in all_hourly_files)\n    print(\"read all hourly csv's\")\n    \n    for df in df_from_each_hourly_file:\n        print(\"reading df for day:\"+day+\"\\n\")\n\n        # Getting hour value in df to match hour in cdf file for replacement of O3 value\n        hour = df['YYYYMMDDHH'].str[8:10]\n        print(hour.values[0])\n        \n        # Matching hours between df and cdf file for proper replacement of values.\n        cdf_filt = df_cdf.sel(TSTEP=df_cdf.TSTEP == int(hour.values[0]))\n\n        # Changing the shape of \"prediction\" column to match expected dim shape found in cdf file\n        reshaped_prediction = np.atleast_3d(df['prediction']).reshape(-1, 265, 442)\n\n        # Remove \"LAY\" Dimension in O3 variable already in nc file.\n        reduced_dim = cdf_filt['O3'].sel(LAY=1, drop=True)\n        # Swap values from original nc file with new prediction data\n        reduced_dim.values = reshaped_prediction\n\n        # Apply changes to data variable in nc file\n        cdf_filt['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\n        cdf_filt.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')\n\n        print('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+day+hour.values[0]+'_Hourly_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 25\n    print(\"reading df for day:\"+day+\"\n                                    ^\nSyntaxError: EOL while scanning string literal\n",
  "history_begin_time" : 1657246244969,
  "history_end_time" : 1657246540595,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "zl22tXflXGc0",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\n\nprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n      \ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Opening: /groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_extracted.nc\nSaved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_ML_extracted.nc\n",
  "history_begin_time" : 1656459498325,
  "history_end_time" : 1657246540064,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "kdBDR4zuGRKz",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(2)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\n\nprint(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\"_\n      \ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "  File \"processing_test_netcdf.py\", line 17\n    print(\"Opening: \"+\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[1]+\"_extracted.nc\"_\n                                                                                                                                                  ^\nSyntaxError: invalid syntax\n",
  "history_begin_time" : 1656459474602,
  "history_end_time" : 1657246539364,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "p72xum4kath",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(3)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220625_ML_extracted.nc\n",
  "history_begin_time" : 1656453929138,
  "history_end_time" : 1656454194243,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Done"
},{
  "history_id" : "tlpe3au2vjr",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\nbase = datetime.datetime.today() - timedelta(days=2)\ndate_list = [base - timedelta(days=x) for x in range(3)]\ndays = [date.strftime('%Y%m%d') for date in date_list]\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_\"+days[2]+\"_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(days[1]+\"|\"+days[0], case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > days[1]+'11') & (df_filt['YYYYMMDDHH'] < days[0]+'12')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')\n\nprint('Saved updated netCDF file: /groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_'+days[1]+'_ML_extracted.nc')",
  "history_output" : "bash: python: command not found\n",
  "history_begin_time" : 1656428425283,
  "history_end_time" : 1656428429355,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},{
  "history_id" : "60hZgMCFuH2u",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061311') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655501956099,
  "history_end_time" : 1655503046217,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "PoORHAfZg0Ux",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061311') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655501841903,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "WICvybCO3non",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "",
  "history_begin_time" : 1655496063976,
  "history_end_time" : 1655501871999,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Failed"
},{
  "history_id" : "9wdqy7efw4qC",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655495993831,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "beeVZaInXI6r",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "",
  "history_begin_time" : 1655494545852,
  "history_end_time" : 1655496023888,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Failed"
},{
  "history_id" : "INqHz0JSeptf",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613|20220614\", case = False, regex=True)]\ndf_filt = df_filt[(df_filt['YYYYMMDDHH'] > '2022061312') & (df_filt['YYYYMMDDHH'] < '2022061412')]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_ML_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655493655846,
  "history_end_time" : 1655494421371,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "3nKofAxIaXVd",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to correspond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613\")]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_lat = np.atleast_3d(df_filt['Latitude']).reshape(-1, 265, 442)\nreshaped_lon = np.atleast_3d(df_filt['Longitude']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\ndf_cdf['LAT'] = (['TSTEP', 'ROW', 'COL'], reshaped_lat)\ndf_cdf['LON'] = (['TSTEP', 'ROW', 'COL'], reshaped_lon)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc')",
  "history_output" : "Running",
  "history_begin_time" : 1655406353871,
  "history_end_time" : 1655493635343,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : "Stopped"
},{
  "history_id" : "f2HBptDwAyBk",
  "history_input" : "import xarray as xr\nimport pandas as pd\nimport glob, os\nimport numpy as np\nfrom pathlib import Path\nimport datetime\nfrom datetime import timedelta\n# home directory\nhome = str(Path.home())\n\n# nc file need to corespond to the same prediction date in \"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\"\ndf_cdf = xr.open_dataset(\"/groups/ESS/share/projects/SWUS3km/data/cmaqdata/CCTMout/12km/POST/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc\")\n\ndf_csv = pd.read_csv(\"/groups/ESS/aalnaim/cmaq/prediction_files/prediction_rf_Jun13.csv\")\ndf_csv['YYYYMMDDHH'] = df_csv['YYYYMMDDHH'].astype(str)\ndf_filt = df_csv[df_csv['YYYYMMDDHH'].str.contains(\"20220613\")]\n\n# Reshape \"prediction/Latitude/Longitude\" columns to (TSTEP, ROW, COL), these lines will reshape data into (24, 265, 442)\nreshaped_prediction = np.atleast_3d(df_filt['prediction']).reshape(-1, 265, 442)\nreshaped_lat = np.atleast_3d(df_filt['Latitude']).reshape(-1, 265, 442)\nreshaped_lon = np.atleast_3d(df_filt['Longitude']).reshape(-1, 265, 442)\n\n# Remove \"LAY\" Dimension in O3 variable already in nc file.\nreduced_dim = df_cdf['O3'].sel(LAY=1, drop=True)\n# Swap values from original nc file with new prediction data\nreduced_dim.values = reshaped_prediction\n\n# Apply changes to data variable in nc file\ndf_cdf['O3'] = (['TSTEP', 'ROW', 'COL'], reshaped_prediction)\ndf_cdf['LAT'] = (['TSTEP', 'ROW', 'COL'], reshaped_lat)\ndf_cdf['LON'] = (['TSTEP', 'ROW', 'COL'], reshaped_lon)\n\ndf_cdf.to_netcdf('/groups/ESS/aalnaim/cmaq/prediction_nc_files/COMBINE3D_ACONC_v531_gcc_AQF5X_20220612_extracted.nc')",
  "history_output" : null,
  "history_begin_time" : 1655406212085,
  "history_end_time" : null,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : null,
  "indicator" : null
},{
  "history_id" : "d4w6nlhuaxi",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1656450968039,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},{
  "history_id" : "tyaio8q7nov",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1656452485883,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},{
  "history_id" : "mhl1fs9545l",
  "history_input" : null,
  "history_output" : null,
  "history_begin_time" : null,
  "history_end_time" : 1657618957285,
  "history_notes" : null,
  "history_process" : "3asyzj",
  "host_id" : "p6wvf2",
  "indicator" : "Stopped"
},]
